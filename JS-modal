document.addEventListener('DOMContentLoaded', function () {
  const components = document.querySelectorAll('[data-cmp="modal-link"]');

  components.forEach((comp) => {
    const trigger = comp.querySelector('.modal-trigger');
    const overlay = comp.querySelector('.modal-overlay');
    const closeBtn = comp.querySelector('.modal-close');
    const cardToggle = comp.querySelector('.change-card-toggle');
    const cardDropdown = comp.querySelector('.change-card-dropdown');
    const selectToggle = comp.querySelector('.card-select-toggle');
    const selectDropdown = comp.querySelector('.card-select-dropdown');

    // Modal open
    trigger?.addEventListener('click', () => {
      overlay.classList.add('active');
    });

    // Modal close
    closeBtn?.addEventListener('click', () => {
      overlay.classList.remove('active');
    });

    overlay?.addEventListener('click', (e) => {
      if (e.target === overlay) {
        overlay.classList.remove('active');
      }
    });

    // Toggle "Change Card" dropdown
    cardToggle?.addEventListener('click', () => {
      cardDropdown?.classList.toggle('active');
    });

    // Toggle Card Select dropdown
    selectToggle?.addEventListener('click', () => {
      selectDropdown?.classList.toggle('active');
    });
  });
});
