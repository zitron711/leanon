document.addEventListener('DOMContentLoaded', () => {
  const inputs = document.querySelectorAll('.monthly-spend');
  const totalCashbackEl = document.getElementById('total-cashback');

  function formatCurrency(amount) {
    return `$${amount.toFixed(2)}`;
  }

  function calculateRowAndTotal() {
    let total = 0;

    inputs.forEach((input) => {
      const inputValue = parseFloat(input.value) || 0;
      const row = input.closest('tr');
      const description = row.querySelector('.reward-description');
      const multiplier = parseFloat(description?.dataset.calculation) || 0;
      const cashback = inputValue * multiplier;

      const cashbackSpan = row.querySelector('.cashback');
      if (cashbackSpan) {
        cashbackSpan.textContent = formatCurrency(cashback);
      }

      total += cashback;
    });

    if (totalCashbackEl) {
      totalCashbackEl.textContent = formatCurrency(total);
    }
  }

  calculateRowAndTotal();

  inputs.forEach(input => {
    input.addEventListener('input', calculateRowAndTotal);
  });
});
